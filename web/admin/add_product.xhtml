<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    

    <h:head>
        <title>Ramani Digital - New Plan</title>
        <link href="css/style.css" rel="stylesheet" type="text/css"/>
    </h:head>
    <ui:insert>
        <ui:include src="templates/top.xhtml"/>
    </ui:insert>
    <h:body>
        <div id="content">
            <p:layout>
                <p:layoutUnit position="west" 
                              size="200" 
                              collapsible="true"
                              header="Admin Tasks">
                    <ui:insert>
                        <ui:include src="templates/menu.xhtml"/>
                    </ui:insert>
                </p:layoutUnit>
                <p:layoutUnit position="center" 
                              resizable="false" 
                              size="150" 
                              closable="false"
                              collapsible="false">
                    <p:layout>
                        <h:form enctype="multipart/form-data">
                            <p:layoutUnit position="center">
                                <h4>Add New Plan</h4>
                                <p:messages autoUpdate="true" />
                                <p:panel header="Plan Specifications" toggleable="true" >
                                    <p:panelGrid columns="2" 
                                                 style="display: inline-block;
                                                 float: left;
                                                 margin-top:10px;">
                                        <f:facet name="header">
                                            <p:row>
                                                <p:column colspan="2">Number of Rooms</p:column>
                                            </p:row>
                                        </f:facet>
                                        <h:outputLabel value="Bedrooms" for="txRmCount" />
                                        <p:inputText id="txRmCount" 
                                                     label="txroomCount" 
                                                     required="true" 
                                                     requiredMessage="Required: Number of bedrooms"
                                                     value="#{planController.numOfRooms.bedrooms}"
                                                     converterMessage="Invalid value for number of bedroom (Enter a digit btw 1-5)"
                                                     maxlength="1">
                                            <f:validator validatorId="positiveIntegerValidator"/>
                                            <f:convertNumber integerOnly="true"/>
                                        </p:inputText>
                                        <h:outputLabel value="Storeys" for="txFlCount" />
                                        <p:inputText id="txFlCount" 
                                                     label="txFloorCount" 
                                                     required="true" 
                                                     requiredMessage="Required: Number of floors"
                                                     value="#{planController.numOfRooms.storeys}"
                                                     converterMessage="Invalid value for number of floors (Enter a digit btw 1-5)"
                                                     maxlength="1">
                                            <f:convertNumber integerOnly="true"/>
                                        </p:inputText>
                                        <h:outputLabel value="Bathrooms" for="txBthCount"/>
                                        <p:inputText id="txBthCount" 
                                                     label="txBthCount" 
                                                     required="true" 
                                                     requiredMessage="Required: Number of bathrooms"
                                                     value="#{planController.numOfRooms.bathrooms}"
                                                     converterMessage="Invalid value for number of bathrooms (Enter a digit btw 1-5)"
                                                     maxlength="1">
                                            <f:validator validatorId="positiveIntegerValidator"/>
                                            <f:convertNumber integerOnly="true"/>
                                        </p:inputText>
                                        <h:outputLabel value="Kitchens" for="txKitchenCount" />
                                        <p:inputText id="txKitchenCount" 
                                                     label="txKitchenCount" 
                                                     required="true" 
                                                     requiredMessage="Required: Number of kitchens"
                                                     value="#{planController.numOfRooms.kitchens}"
                                                     converterMessage="Invalid value for number of kitchens (Enter a digit btw 1-5)"
                                                     maxlength="1">
                                        <f:validator validatorId="positiveIntegerValidator"/>
                                        <f:convertNumber integerOnly="true"/>
                                        </p:inputText>
                                        <h:outputLabel value="Dining Rooms" for="txDiningCount" />
                                        <p:inputText id="txDiningCount" 
                                                     label="txDiningCount" 
                                                     required="true" 
                                                     requiredMessage="Required: Number of dining rooms"
                                                     value="#{planController.numOfRooms.dining}"
                                                     converterMessage="Invalid value for number of dining rooms (Enter a digit btw 1-5)"
                                                     maxlength="1">
                                            <f:validator validatorId="positiveIntegerValidator"/>
                                            <f:convertNumber integerOnly="true"/>
                                        </p:inputText>
                                        <h:outputLabel value="Living Rooms" for="txLivingCount" />
                                        <p:inputText id="txLivingCount" 
                                                     label="txLivingCount" 
                                                     required="true" 
                                                     requiredMessage="Required: Number of living rooms"
                                                     value="#{planController.numOfRooms.living}"
                                                     converterMessage="Invalid value for number of living rooms (Enter a digit btw 1-5)"
                                                     maxlength="1">
                                            <f:validator validatorId="positiveIntegerValidator"/>
                                            <f:convertNumber integerOnly="true"/>
                                        </p:inputText>
                                        <h:outputLabel value="Laundry Rooms" for="txLaundryCount" />
                                        <p:inputText id="txLaundryCount" 
                                                     label="txlaundryCount" 
                                                     required="true" 
                                                     requiredMessage="Required: Number of laundry rooms"
                                                     value="#{planController.numOfRooms.laundry}"
                                                     converterMessage="Invalid value for number of laundry rooms (Enter a digit btw 1-5)"
                                                     maxlength="1">
                                            <f:convertNumber integerOnly="true"/>
                                        </p:inputText>
                                    </p:panelGrid>
                                    <p:panelGrid columns="2" 
                                                 style="display: inline-block;margin-top:10px;float: left;">
                                        <f:facet name="header">
                                            <p:row>
                                                <p:column colspan="2">Details</p:column>
                                            </p:row>
                                        </f:facet>
                                        <h:outputLabel value="Title"
                                                       for="txPlanTitle"/>
                                        <p:inputText id="txPlanTitle"
                                                     label="txPlanTitle"
                                                     required="false"
                                                     value="#{planController.newPlan.title}"
                                                     validatorMessage="Invalid characters in plan title"
                                                     maxlength="50">
                                            <f:validateRegex pattern="([\w\s]+)"/>
                                        </p:inputText>
                                        <h:outputLabel value="Typology"/>
                                        <p:selectOneMenu style="width: 150px;" 
                                                         value="#{planController.typology.typologyId}"
                                                         id="optTypology">
                                            <f:selectItems value="#{selectTypology.typologies}"
                                                           var="typology"
                                                           itemValue="#{typology.typologyId}"/>
                                            <!--<f:convertNumber type="number" minIntegerDigits="1"/>-->
                                        </p:selectOneMenu>
                                        <h:outputLabel value="Roofing Styles"/>
                                        <p:selectOneMenu style="width: 150px;"
                                                         value="#{planController.roofType.roofingId}"
                                                         id="optRoof">
                                            <f:selectItems value="#{selectRoofing.roofStyles}"
                                                           var="roof"
                                                           itemValue="#{roof.roofingId}"
                                                           />
                                        </p:selectOneMenu>
                                        <h:outputLabel value="Total Area" for="txArea" />
                                        <p:inputText id="txArea" 
                                                     label="txTotalArea" 
                                                     required="true" 
                                                     requiredMessage="Required: Total area"
                                                     value="#{planController.newPlan.totalArea}">
                                        <f:validator validatorId="positiveIntegerValidator"/>
                                        </p:inputText>
                                        <h:outputLabel value="Published"/>
                                        <p:selectBooleanCheckbox value="#{planController.featuredState}"/>
                                    </p:panelGrid>
                                    <p:panelGrid columns="3" style="display: inline-block;margin-top:10px;">
                                        <f:facet name="header">
                                            <p:row>
                                                <p:column colspan="3">Pricing</p:column>
                                            </p:row>
                                        </f:facet>
                                        <h:outputLabel value="Plan Price" for="txPlanPrice"/>
                                        <h:outputLabel value="Bill of Quantities" for="txBoq"/>
                                        <h:outputLabel value="Materials Schedule" for="txSchedule"/>
                                        <p:inputText id="txPlanPrice" 
                                                     required="true" 
                                                     requiredMessage="Required: Price of plan"
                                                     label="Plan Price"
                                                     value="#{planController.newPlan.pricePlan}"
                                                     validatorMessage="Plan price has to be in range: (10k - 100k)">
                                            <f:validateDoubleRange minimum="10000.00" maximum="100000.00"/>
                                        </p:inputText>
                                        <p:inputText id="txBoq" 
                                                     required="true" 
                                                     requiredMessage="Required: Prices of bill of quantities"
                                                     label="Bill of Quanties Price"
                                                     value="#{planController.newPlan.priceBoq}"
                                                     validatorMessage="BoQ price has to be in range: (1k - 10k)">
                                            <f:validateDoubleRange minimum="1000.00" maximum="10000.00"/>
                                        </p:inputText>
                                        <p:inputText id="txSchedule" 
                                                     required="true" 
                                                     requiredMessage="Required: Price of material schedule"
                                                     label="Material Schedule Price"
                                                     value="#{planController.newPlan.priceMtrSchedule}"
                                                     validatorMessage="Material schedule price has to be in range: (1k - 5k)">
                                            <f:validateDoubleRange minimum="1000.00" maximum="5000.00"/>
                                        </p:inputText>
                                    </p:panelGrid>
                                </p:panel>
                                <p:panel header="Description" toggleable="true" collapsed="false">
                                    <p:editor id="editor" width="600" 
                                              value="#{planController.newPlan.description}">
                                    </p:editor>
                                </p:panel>
                                <p:panel header="Plan Attachments" toggleable="true">
                                    <p:panelGrid columns="1" style="width: 100%;">
                                        <h:outputLabel>Images</h:outputLabel>
                                        <p:fileUpload allowTypes="/(\.|\/)(gif|jp?g|png)$/" 
                                                      label="Attach" 
                                                      fileLimit="6"
                                                      fileUploadListener="#{planController.uploadManager.upload}"
                                                      mode="advanced"
                                                      multiple="true"
                                                      sizeLimit="2000000"
                                                      style="width: 100%;"
                                                      previewWidth="50"
                                                      id="imgUpload"/>
                                        
                                        <h:outputLabel>PDF Documents</h:outputLabel>
                                        <p:fileUpload allowTypes="/(\.|\/)(pdf)$/" 
                                                      label="Attach" 
                                                      fileLimit="6"
                                                      fileUploadListener="#{planController.uploadManager.upload}"
                                                      mode="advanced"
                                                      multiple="true"
                                                      sizeLimit="2000000"
                                                      style="width: 100%;"
                                                      previewWidth="50"
                                                      id="docUpload"/>
                                    </p:panelGrid>
                                </p:panel>
                                <p:panel style="height: 40px;">
                                    <p:commandButton value="Save and View"
                                                     actionListener="#{planController.savePlan()}"
                                                     style="float: right; "/>
                                    <p:commandButton value="Save and Continue" 
                                                     actionListener="#{planController.savePlan()}"
                                                     style="float: right;margin-right: 5px;"
                                                     />
                                </p:panel>
                            </p:layoutUnit>
                        </h:form>
                    </p:layout>
                </p:layoutUnit>
            </p:layout>
            <ui:insert>
                <ui:include src="templates/footer.xhtml"/>
            </ui:insert>
        </div>
    </h:body>
</html>

