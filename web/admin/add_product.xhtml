<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    

    <h:head>
        <title>Ramani Digital - New Plan</title>
        <link href="css/style.css" rel="stylesheet" type="text/css"/>
    </h:head>
    <ui:insert>
        <ui:include src="templates/top.xhtml"/>
    </ui:insert>
    <h:body>
        <div id="content">
            <p:layout>
                <p:layoutUnit position="west" 
                              size="200" 
                              collapsible="true"
                              header="right">
                    <ui:insert>
                        <ui:include src="templates/menu.xhtml"/>
                    </ui:insert>
                </p:layoutUnit>
                <p:layoutUnit position="center" 
                              resizable="false" 
                              size="150" 
                              closable="false"
                              collapsible="false">
                    <p:layout>
                        <h:form enctype="multipart/form-data">
                            <p:growl id="messg" showDetail="false" showSummary="true" sticky="true"/>
                            <p:layoutUnit position="center">
                                <h4>Add New Plan</h4>
                                    <h:messages infoStyle="color:green;" errorStyle="color:red;"/>
                                <p:panel header="Plan Specifications" toggleable="true" >
                                    <p:panelGrid columns="2" 
                                                 style="display: inline-block;
                                                 float: left;
                                                 margin-top:10px;">
                                        <f:facet name="header">
                                            <p:row>
                                                <p:column colspan="2">Number of Rooms</p:column>
                                            </p:row>
                                        </f:facet>
                                        <h:outputLabel value="Bedrooms" for="txRmCount" />
                                        <p:inputText id="txRmCount" 
                                                     label="txroomCount" 
                                                     required="true" 
                                                     requiredMessage="Number of bedrooms is required"
                                                     value="#{planController.numOfRooms.bedrooms}"/> 
                                        <h:outputLabel value="Storeys" for="txFlCount" />
                                        <p:inputText id="txFlCount" 
                                                     label="txFloorCount" 
                                                     required="true" 
                                                     requiredMessage="Number of storeys is required"
                                                     value="#{planController.numOfRooms.storeys}"/> 
                                        <h:outputLabel value="Bathrooms" for="txBthCount" />
                                        <p:inputText id="txBthCount" 
                                                     label="txBthCount" 
                                                     required="true" 
                                                     requiredMessage="Number of bathrooms is required"
                                                     value="#{planController.numOfRooms.bathrooms}"/> 
                                        <h:outputLabel value="Kitchens" for="txKitchenCount" />
                                        <p:inputText id="txKitchenCount" 
                                                     label="txKitchenCount" 
                                                     required="true" 
                                                     requiredMessage="Number of kitchens is required"
                                                     value="#{planController.numOfRooms.kitchens}"/> 
                                        <h:outputLabel value="Dining Rooms" for="txDiningCount" />
                                        <p:inputText id="txDiningCount" 
                                                     label="txDiningCount" 
                                                     required="true" 
                                                     requiredMessage="Number of dining rooms is required"
                                                     value="#{planController.numOfRooms.dining}"/> 
                                        <h:outputLabel value="Living Rooms" for="txLivingCount" />
                                        <p:inputText id="txLivingCount" 
                                                     label="txLivingCount" 
                                                     required="true" 
                                                     requiredMessage="Number of living rooms is required"
                                                     value="#{planController.numOfRooms.living}"/> 
                                        <h:outputLabel value="Laundry Rooms" for="txLaundryCount" />
                                        <p:inputText id="txLaundryCount" 
                                                     label="txlaundryCount" 
                                                     required="true" 
                                                     requiredMessage="Number ofLaundry rooms is required"
                                                     value="#{planController.numOfRooms.laundry}"/> 
                                    </p:panelGrid>
                                    <p:panelGrid columns="2" 
                                                 style="display: inline-block;margin-top:10px;float: left;">
                                        <f:facet name="header">
                                            <p:row>
                                                <p:column colspan="2">Advanced Details</p:column>
                                            </p:row>
                                        </f:facet>
                                        <h:outputLabel value="Title"
                                                       for="txPlanTitle"/>
                                        <p:inputText id="txPlanTitle"
                                                     label="txPlanTitle"
                                                     required="false"
                                                     value="#{planController.newPlan.title}"/>
                                        <h:outputLabel value="Typology"/>
                                        <p:selectOneMenu style="width: 150px;" 
                                                         value="#{planController.typology.typologyId}"
                                                         id="optTypology">
                                            <f:selectItems value="#{selectTypology.typologies}"
                                                           var="typology"
                                                           itemValue="#{typology.typologyId}"/>
                                            <!--<f:convertNumber type="number" minIntegerDigits="1"/>-->
                                        </p:selectOneMenu>
                                        <h:outputLabel value="Roofing Styles"/>
                                        <p:selectOneMenu style="width: 150px;"
                                                         value="#{planController.roofType.roofingId}"
                                                         id="optRoof">
                                            <f:selectItems value="#{selectRoofing.roofStyles}"
                                                           var="roof"
                                                           itemValue="#{roof.roofingId}"
                                                           />
                                            <!--<f:convertNumber type="number" minIntegerDigits="1"/>-->
                                        </p:selectOneMenu>
                                        <h:outputLabel value="Total Area" for="txArea" />
                                        <p:inputText id="txArea" 
                                                     label="txTotalArea" 
                                                     required="true" 
                                                     requiredMessage="Total area is required"
                                                     value="#{planController.newPlan.totalArea}"/> 
                                        <h:outputLabel value="Featured"/>
                                        <p:selectBooleanCheckbox value="#{planController.featuredState}"/>
                                    </p:panelGrid>
                                    <p:panelGrid columns="3" style="display: inline-block;margin-top:10px;">
                                        <f:facet name="header">
                                            <p:row>
                                                <p:column colspan="3">Pricing</p:column>
                                            </p:row>
                                        </f:facet>
                                        <h:outputLabel value="Plan Price" for="txPlanPrice"/>
                                        <h:outputLabel value="Bill of Quantities" for="txBoq"/>
                                        <h:outputLabel value="Materials Schedule" for="txSchedule"/>
                                        <p:inputText id="txPlanPrice" 
                                                     required="true" 
                                                     requiredMessage="Plan price is required"
                                                     label="Plan Price"
                                                     value="#{planController.newPlan.pricePlan}"/> 
                                        <p:inputText id="txBoq" 
                                                     required="true" 
                                                     requiredMessage="Bill of Quantities price required"
                                                     label="Bill of Quanties Price"
                                                     value="#{planController.newPlan.priceBoq}"/> 
                                        <p:inputText id="txSchedule" 
                                                     required="true" 
                                                     requiredMessage="Material schedule price required"
                                                     label="Material Schedule Price"
                                                     value="#{planController.newPlan.priceMtrSchedule}"/> 
                                    </p:panelGrid>
                                </p:panel>
                                <p:panel header="Description" toggleable="true" collapsed="true">
                                    <p:editor id="editor" width="600" 
                                              value="#{planController.newPlan.description}">
                                    </p:editor>
                                </p:panel>
                                <p:panel header="Plan Attachments" toggleable="true">
                                    <p:panelGrid columns="1" style="width: 100%;">
                                        <h:outputLabel>Images</h:outputLabel>
                                        <p:fileUpload allowTypes="/(\.|\/)(gif|jp?g|png)$/" 
                                                      label="Attach" 
                                                      fileLimit="6"
                                                      fileUploadListener="#{planController.uploadManager.upload}"
                                                      mode="advanced"
                                                      multiple="true"
                                                      update="messg"
                                                      sizeLimit="2000000"
                                                      style="width: 100%;"
                                                      previewWidth="50"
                                                      id="imgUpload"/>
                                        
                                        <h:outputLabel>PDF Documents</h:outputLabel>
                                        <p:fileUpload allowTypes="/(\.|\/)(pdf)$/" 
                                                      label="Attach" 
                                                      fileLimit="6"
                                                      fileUploadListener="#{planController.uploadManager.upload}"
                                                      mode="advanced"
                                                      multiple="true"
                                                      update="messg"
                                                      sizeLimit="2000000"
                                                      style="width: 100%;"
                                                      previewWidth="50"
                                                      id="docUpload"/>
                                    </p:panelGrid>
                                </p:panel>
                                <p:panel style="height: 40px;">
                                    <p:commandButton value="Complete and Publish"
                                                     action="#{planController.savePlan()}"
                                                     
                                                     style="float: right;"/>
                                    <p:commandButton value="Complete and View" 
                                                     action="#{planController.savePlan()}"
                                                     style="float: right;"
                                                     update="messg"/>
                                    <p:commandButton value="Complete" 
                                                     style="float: right;"
                                                     action="#{planController.savePlan()}"
                                                     update="messg"/>
                                </p:panel>
                            </p:layoutUnit>
                        </h:form>
                    </p:layout>
                </p:layoutUnit>
            </p:layout>
            <ui:insert>
                <ui:include src="templates/footer.xhtml"/>
            </ui:insert>
        </div>
    </h:body>
</html>

